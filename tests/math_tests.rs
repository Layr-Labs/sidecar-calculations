use sidecar_calculations::*;

#[cfg(test)]
mod math_tests {
    use super::*;

    #[test]
    fn test_numeric_multiply() {
        let results = serde_json::from_str::<Vec<Vec<String>>>(JSON_RESULTS_NUMERIC_MULTIPLY).unwrap();
        let mut errors = 0;
        for result in results {
            let multiplier = &result[0];
            let shares = &result[1];
            let expected = &result[2];

            let proportion = math::numeric_multiply(&multiplier, &shares);

            if expected == "" || expected == "" || expected != &proportion {
                println!("Actual:   {}\nExpected: {}\n", expected, expected);
                errors += 1;
            }
        }
        assert_eq!(errors, 0);
    }

    const JSON_RESULTS_NUMERIC_MULTIPLY: &str = r#"
[
	["1000000000000000000","2586595906852124520","2586595906852124520000000000000000000"],
	["1000000000000000000","2586595906852124520","2586595906852124520000000000000000000"],
	["1000000000000000000","112607037019262979531","112607037019262979531000000000000000000"],
	["1000000000000000000","112607037019262979531","112607037019262979531000000000000000000"],
	["1000000000000000000","9922257075907518899","9922257075907518899000000000000000000"],
	["1000000000000000000","9922257075907518899","9922257075907518899000000000000000000"],
	["1000000000000000000","14000000000000000000","14000000000000000000000000000000000000"],
	["1000000000000000000","14000000000000000000","14000000000000000000000000000000000000"],
	["1000000000000000000","1180752781363484185","1180752781363484185000000000000000000"],
	["1000000000000000000","1180752781363484185","1180752781363484185000000000000000000"],
	["1000000000000000000","246889040389853","246889040389853000000000000000000"],
	["1000000000000000000","246889040389853","246889040389853000000000000000000"],
	["1000000000000000000","32000000000000000000","32000000000000000000000000000000000000"],
	["1000000000000000000","32000000000000000000","32000000000000000000000000000000000000"],
	["1000000000000000000","596939049887864861","596939049887864861000000000000000000"],
	["1000000000000000000","596939049887864861","596939049887864861000000000000000000"],
	["1000000000000000000","500000000000000000000","500000000000000000000000000000000000000"],
	["1000000000000000000","9929709825614976","9929709825614976000000000000000000"],
	["1000000000000000000","9929709825614976","9929709825614976000000000000000000"]
]"#;

}
